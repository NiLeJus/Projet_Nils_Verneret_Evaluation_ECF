{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport jwtDecode from \"jwt-decode\";\nconst useAuthToken = () => {\n  _s();\n  const [isValidToken, setIsValidToken] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      const currentTime = Date.now() / 1000; // convertir en secondes\n      if (decodedToken.exp > currentTime) {\n        setIsValidToken(true);\n      } else {\n        localStorage.removeItem(\"token\"); // Token expiré, le supprimer\n        setIsValidToken(false);\n      }\n    }\n  }, []);\n  return isValidToken;\n};\n_s(useAuthToken, \"4sbTpkJmG3CdaSXgZ+38yyFl1E0=\");\nexport default useAuthToken();","map":{"version":3,"names":["useEffect","useState","jwtDecode","useAuthToken","_s","isValidToken","setIsValidToken","token","localStorage","getItem","decodedToken","currentTime","Date","now","exp","removeItem"],"sources":["C:/Users/nilsv/Documents/2_TRAVAIL/WEB_DEV/EVAL_ECF/projet/website/src/functions/useAuthToken.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst useAuthToken = () => {\r\n  const [isValidToken, setIsValidToken] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const decodedToken = jwtDecode(token);\r\n      const currentTime = Date.now() / 1000; // convertir en secondes\r\n      if (decodedToken.exp > currentTime) {\r\n        setIsValidToken(true);\r\n      } else {\r\n        localStorage.removeItem(\"token\"); // Token expiré, le supprimer\r\n        setIsValidToken(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return isValidToken;\r\n};\r\n\r\nexport default useAuthToken();"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,YAAY;AAElC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EAEvDD,SAAS,CAAC,MAAM;IACd,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACT,MAAMG,YAAY,GAAGR,SAAS,CAACK,KAAK,CAAC;MACrC,MAAMI,WAAW,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;MACvC,IAAIH,YAAY,CAACI,GAAG,GAAGH,WAAW,EAAE;QAClCL,eAAe,CAAC,IAAI,CAAC;MACvB,CAAC,MAAM;QACLE,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;QAClCT,eAAe,CAAC,KAAK,CAAC;MACxB;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOD,YAAY;AACrB,CAAC;AAACD,EAAA,CAlBID,YAAY;AAoBlB,eAAeA,YAAY,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}