{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nilsv\\\\Documents\\\\2_TRAVAIL\\\\WEB_DEV\\\\EVAL_ECF\\\\projet\\\\website\\\\src\\\\sections\\\\VehiclesCardrousel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, forwardRef } from 'react';\nimport VehicleCard from '../components/vehicleRelated/VehicleCard';\nimport { Container, Row, Spinner } from 'react-bootstrap'; // Import du Spinner pour l'indicateur de chargement\nimport { fetchVehicles } from '../serverRelated/ApiRequest';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const VehiclesCardrousel = /*#__PURE__*/_s( /*#__PURE__*/forwardRef(_c = _s(({\n  selectedBrands,\n  selectedModels,\n  selectedTypes,\n  onLoaded\n}, ref) => {\n  _s();\n  const [vehicles, setVehicles] = useState([]);\n  const [loading, setLoading] = useState(true); // Ajout de l'état de chargement\n\n  useEffect(() => {\n    const initVehicles = async () => {\n      try {\n        const fetchedVehicles = await fetchVehicles();\n        setVehicles(fetchedVehicles);\n        setLoading(false); // Mettre à jour l'état de chargement une fois les données chargées\n        onLoaded();\n      } catch (error) {\n        console.error('Erreur lors de l\\'initialisation des véhicules:', error);\n      }\n    };\n    initVehicles();\n  }, [onLoaded]);\n  const filterVehicles = () => {\n    return vehicles.filter(vehicle => (selectedBrands.length === 0 || selectedBrands.includes(vehicle.VehicleModel.Brand.name)) && (selectedModels.length === 0 || selectedModels.includes(vehicle.VehicleModel.name)) && (selectedTypes.length === 0 || selectedTypes.includes(vehicle.VehicleType.name)));\n  };\n\n  // Placeholder pour les cartes de véhicules\n  const renderPlaceholders = () => {\n    const placeholders = [];\n    for (let i = 0; i < 5; i++) {\n      // Affiche 5 placeholders temporaires\n      placeholders.push( /*#__PURE__*/_jsxDEV(VehicleCard, {\n        placeholder: true // Ajout d'une prop 'placeholder' pour indiquer que c'est un placeholder\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this));\n    }\n    return placeholders;\n  };\n  return /*#__PURE__*/_jsxDEV(Row, {\n    className: \"d-flex justify-content-center\",\n    ref: ref,\n    children: loading ?\n    // Affiche les placeholders pendant le chargement\n    renderPlaceholders() :\n    // Affiche les véhicules filtrés une fois les données chargées\n    filterVehicles().map((vehicle, index) => {\n      var _vehicle$Photos$;\n      return /*#__PURE__*/_jsxDEV(VehicleCard, {\n        vehicleId: vehicle.id,\n        brand: vehicle.VehicleModel.Brand.name,\n        vehicleModel: vehicle.VehicleModel.name,\n        productionYear: vehicle.production_year,\n        mileage: vehicle.mileage,\n        fuelType: vehicle.FuelType.name,\n        transmission: vehicle.Transmission.name,\n        vehicleCondition: vehicle.VehicleCondition.name,\n        price: vehicle.price,\n        photo: ((_vehicle$Photos$ = vehicle.Photos[0]) === null || _vehicle$Photos$ === void 0 ? void 0 : _vehicle$Photos$.url) || 'chemin_vers_image_par_defaut.jpg',\n        options: vehicle.Options.map(option => option.name + ' - ' + option.description)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}, \"gAWBsJVRkhW42LW9DzD83tRw8Yw=\")), \"gAWBsJVRkhW42LW9DzD83tRw8Yw=\");\n_c2 = VehiclesCardrousel;\nexport default VehiclesCardrousel;\nvar _c, _c2;\n$RefreshReg$(_c, \"VehiclesCardrousel$forwardRef\");\n$RefreshReg$(_c2, \"VehiclesCardrousel\");","map":{"version":3,"names":["React","useState","useEffect","forwardRef","VehicleCard","Container","Row","Spinner","fetchVehicles","jsxDEV","_jsxDEV","VehiclesCardrousel","_s","_c","selectedBrands","selectedModels","selectedTypes","onLoaded","ref","vehicles","setVehicles","loading","setLoading","initVehicles","fetchedVehicles","error","console","filterVehicles","filter","vehicle","length","includes","VehicleModel","Brand","name","VehicleType","renderPlaceholders","placeholders","i","push","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","className","children","map","index","_vehicle$Photos$","vehicleId","id","brand","vehicleModel","productionYear","production_year","mileage","fuelType","FuelType","transmission","Transmission","vehicleCondition","VehicleCondition","price","photo","Photos","url","options","Options","option","description","_c2","$RefreshReg$"],"sources":["C:/Users/nilsv/Documents/2_TRAVAIL/WEB_DEV/EVAL_ECF/projet/website/src/sections/VehiclesCardrousel.js"],"sourcesContent":["import React, { useState, useEffect, forwardRef } from 'react';\r\nimport VehicleCard from '../components/vehicleRelated/VehicleCard';\r\nimport { Container, Row, Spinner } from 'react-bootstrap'; // Import du Spinner pour l'indicateur de chargement\r\nimport { fetchVehicles } from '../serverRelated/ApiRequest';\r\n\r\nexport const VehiclesCardrousel = forwardRef(({ selectedBrands, selectedModels, selectedTypes, onLoaded }, ref) => {\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [loading, setLoading] = useState(true); // Ajout de l'état de chargement\r\n\r\n  useEffect(() => {\r\n    const initVehicles = async () => {\r\n      try {\r\n        const fetchedVehicles = await fetchVehicles();\r\n        setVehicles(fetchedVehicles);\r\n        setLoading(false); // Mettre à jour l'état de chargement une fois les données chargées\r\n        onLoaded();\r\n      } catch (error) {\r\n        console.error('Erreur lors de l\\'initialisation des véhicules:', error);\r\n      }\r\n    };\r\n    initVehicles();\r\n  }, [onLoaded]);\r\n\r\n  const filterVehicles = () => {\r\n    return vehicles.filter(vehicle => \r\n      (selectedBrands.length === 0 || selectedBrands.includes(vehicle.VehicleModel.Brand.name)) &&\r\n      (selectedModels.length === 0 || selectedModels.includes(vehicle.VehicleModel.name)) &&\r\n      (selectedTypes.length === 0 || selectedTypes.includes(vehicle.VehicleType.name))\r\n    );\r\n  };\r\n\r\n  // Placeholder pour les cartes de véhicules\r\n  const renderPlaceholders = () => {\r\n    const placeholders = [];\r\n    for (let i = 0; i < 5; i++) { // Affiche 5 placeholders temporaires\r\n      placeholders.push(\r\n        <VehicleCard\r\n          key={i}\r\n          placeholder // Ajout d'une prop 'placeholder' pour indiquer que c'est un placeholder\r\n        />\r\n      );\r\n    }\r\n    return placeholders;\r\n  };\r\n\r\n  return (\r\n    <Row className='d-flex justify-content-center' ref={ref}>\r\n      {loading ? (\r\n        // Affiche les placeholders pendant le chargement\r\n        renderPlaceholders()\r\n      ) : (\r\n        // Affiche les véhicules filtrés une fois les données chargées\r\n        filterVehicles().map((vehicle, index) => (\r\n          <VehicleCard\r\n            vehicleId={vehicle.id}\r\n            key={index}\r\n            brand={vehicle.VehicleModel.Brand.name}\r\n            vehicleModel={vehicle.VehicleModel.name}\r\n            productionYear={vehicle.production_year}\r\n            mileage={vehicle.mileage}\r\n            fuelType={vehicle.FuelType.name}\r\n            transmission={vehicle.Transmission.name}\r\n            vehicleCondition={vehicle.VehicleCondition.name}\r\n            price={vehicle.price}\r\n            photo={vehicle.Photos[0]?.url || 'chemin_vers_image_par_defaut.jpg'}\r\n            options={vehicle.Options.map(option => option.name + ' - ' + option.description)}\r\n          />\r\n        ))\r\n      )}\r\n    </Row>\r\n  );\r\n});\r\n\r\nexport default VehiclesCardrousel;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}