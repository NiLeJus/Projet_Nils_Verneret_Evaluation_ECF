{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nilsv\\\\Documents\\\\2_TRAVAIL\\\\WEB_DEV\\\\EVAL_ECF\\\\projet\\\\website\\\\src\\\\components\\\\addingEntries\\\\AddFuelModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Button, Row } from \"react-bootstrap\";\nimport CreatableSelect from \"react-select/creatable\";\nimport { capitalizeFirstLetter } from \"../../functions/capitalizeFirstLetter\";\nimport { fetchFuels } from \"../../serverRelated/ApiRequest\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddFuelModal = ({\n  show,\n  onHide,\n  onModalClose\n}) => {\n  _s();\n  const [selectedFuel, setSelectedFuel] = useState(null);\n  const [fuels, setFuels] = useState([]);\n  const handleCloseModal = () => {\n    onHide();\n    onModalClose();\n  };\n  const handleFetchFuels = async () => {\n    try {\n      const data = await fetchFuelTypes();\n      const transformedFuels = data.map(fuel => ({\n        value: fuel.id.toString(),\n        label: capitalizeFirstLetter(fuel.name)\n      }));\n      setFuels(transformedFuels);\n    } catch (error) {\n      console.error(\"Error fetching fuels:\", error);\n    }\n  };\n  useEffect(() => {\n    handleFetchFuels();\n  }, []);\n  const handleSelectFuel = selectedFuel => {\n    setSelectedFuel(selectedFuel);\n  };\n  const handleAddFuel = async () => {\n    if (selectedFuel && selectedFuel.__isNew__) {\n      try {\n        const newFuel = {\n          name: selectedFuel.label\n        };\n        const response = await fetch(\"http://localhost:5001/api/fuelTypes\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(newFuel)\n        });\n        if (response.ok) {\n          handleFetchFuels();\n        }\n      } catch (error) {\n        console.error(\"Error adding fuel:\", error);\n      }\n    }\n  };\n  const handleModifyFuel = async () => {\n    if (selectedFuel && !selectedFuel.__isNew__) {\n      const newName = prompt(\"Entrez le nouveau nom du type de carburant :\", selectedFuel.label);\n      if (newName && newName.trim() !== \"\") {\n        try {\n          const updatedFuel = {\n            name: newName\n          };\n          const response = await fetch(`http://localhost:5001/api/fuelTypes/${selectedFuel.value}`, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(updatedFuel)\n          });\n          if (response.ok) {\n            handleFetchFuels();\n          }\n        } catch (error) {\n          console.error(\"Error updating fuel:\", error);\n        }\n      }\n    }\n  };\n  const handleDeleteFuel = async fuelId => {\n    if (fuelId) {\n      const confirmDelete = window.confirm(\"Êtes-vous sûr de vouloir supprimer ce type de carburant ?\");\n      if (confirmDelete) {\n        try {\n          const response = await fetch(`http://localhost:5001/api/fuelTypes/${fuelId}`, {\n            method: \"DELETE\"\n          });\n          if (response.ok) {\n            handleFetchFuels();\n          }\n        } catch (error) {\n          console.error(\"Error deleting fuel:\", error);\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: onHide,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: \"Carburant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(CreatableSelect, {\n          isClearable: true,\n          isSearchable: true,\n          onChange: handleSelectFuel,\n          options: fuels,\n          value: selectedFuel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleAddFuel,\n        children: \"Ajouter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"orange\",\n        onClick: handleModifyFuel,\n        children: \"Modifier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"danger\",\n        onClick: () => handleDeleteFuel(selectedFuel === null || selectedFuel === void 0 ? void 0 : selectedFuel.value),\n        children: \"Supprimer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: handleCloseModal,\n        children: \"Fermer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(AddFuelModal, \"+XftsMFLsGU/NNxsHvzuFpSPVxw=\");\n_c = AddFuelModal;\nexport default AddFuelModal;\nvar _c;\n$RefreshReg$(_c, \"AddFuelModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Row","CreatableSelect","capitalizeFirstLetter","fetchFuels","jsxDEV","_jsxDEV","AddFuelModal","show","onHide","onModalClose","_s","selectedFuel","setSelectedFuel","fuels","setFuels","handleCloseModal","handleFetchFuels","data","fetchFuelTypes","transformedFuels","map","fuel","value","id","toString","label","name","error","console","handleSelectFuel","handleAddFuel","__isNew__","newFuel","response","fetch","method","headers","body","JSON","stringify","ok","handleModifyFuel","newName","prompt","trim","updatedFuel","handleDeleteFuel","fuelId","confirmDelete","window","confirm","children","Header","closeButton","Title","fileName","_jsxFileName","lineNumber","columnNumber","Body","isClearable","isSearchable","onChange","options","Footer","variant","onClick","_c","$RefreshReg$"],"sources":["C:/Users/nilsv/Documents/2_TRAVAIL/WEB_DEV/EVAL_ECF/projet/website/src/components/addingEntries/AddFuelModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Modal, Button, Row } from \"react-bootstrap\";\r\nimport CreatableSelect from \"react-select/creatable\";\r\nimport { capitalizeFirstLetter } from \"../../functions/capitalizeFirstLetter\";\r\nimport { fetchFuels } from \"../../serverRelated/ApiRequest\";\r\n\r\nconst AddFuelModal = ({ show, onHide, onModalClose }) => {\r\n  const [selectedFuel, setSelectedFuel] = useState(null);\r\n  const [fuels, setFuels] = useState([]);\r\n\r\n  const handleCloseModal = () => {\r\n    onHide();   \r\n    onModalClose(); \r\n  };\r\n\r\n\r\n  const handleFetchFuels = async () => {\r\n    try {\r\n      const data = await fetchFuelTypes();\r\n      const transformedFuels = data.map(fuel => ({\r\n        value: fuel.id.toString(),\r\n        label: capitalizeFirstLetter(fuel.name),\r\n      }));\r\n      setFuels(transformedFuels);\r\n    } catch (error) {\r\n      console.error(\"Error fetching fuels:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetchFuels();\r\n  }, []);\r\n\r\n  const handleSelectFuel = (selectedFuel) => {\r\n    setSelectedFuel(selectedFuel);\r\n  };\r\n\r\n  const handleAddFuel = async () => {\r\n    if (selectedFuel && selectedFuel.__isNew__) {\r\n      try {\r\n        const newFuel = {\r\n          name: selectedFuel.label,\r\n        };\r\n        const response = await fetch(\"http://localhost:5001/api/fuelTypes\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(newFuel),\r\n        });\r\n\r\n        if (response.ok) {\r\n          handleFetchFuels();\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error adding fuel:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleModifyFuel = async () => {\r\n    if (selectedFuel && !selectedFuel.__isNew__) {\r\n      const newName = prompt(\"Entrez le nouveau nom du type de carburant :\", selectedFuel.label);\r\n      if (newName && newName.trim() !== \"\") {\r\n        try {\r\n          const updatedFuel = {\r\n            name: newName,\r\n          };\r\n          const response = await fetch(`http://localhost:5001/api/fuelTypes/${selectedFuel.value}`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(updatedFuel),\r\n          });\r\n\r\n          if (response.ok) {\r\n            handleFetchFuels();\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error updating fuel:\", error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteFuel = async (fuelId) => {\r\n    if (fuelId) {\r\n      const confirmDelete = window.confirm(\"Êtes-vous sûr de vouloir supprimer ce type de carburant ?\");\r\n      if (confirmDelete) {\r\n        try {\r\n          const response = await fetch(`http://localhost:5001/api/fuelTypes/${fuelId}`, {\r\n            method: \"DELETE\",\r\n          });\r\n\r\n          if (response.ok) {\r\n            handleFetchFuels();\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error deleting fuel:\", error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      show={show}\r\n      onHide={onHide}\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Carburant</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Row>\r\n          <CreatableSelect\r\n            isClearable\r\n            isSearchable\r\n            onChange={handleSelectFuel}\r\n            options={fuels}\r\n            value={selectedFuel}\r\n          />\r\n        </Row>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button\r\n          variant=\"primary\"\r\n          onClick={handleAddFuel}\r\n        >\r\n          Ajouter\r\n        </Button>\r\n        <Button\r\n          variant=\"orange\"\r\n          onClick={handleModifyFuel}\r\n        >\r\n          Modifier\r\n        </Button>\r\n        <Button\r\n          variant=\"danger\"\r\n          onClick={() => handleDeleteFuel(selectedFuel?.value)}\r\n        >\r\n          Supprimer\r\n        </Button>\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={handleCloseModal}\r\n        >\r\n          Fermer\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddFuelModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}